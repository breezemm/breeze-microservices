# @breeze/react-auth

We have to local `@breeze/react-auth` package to handle authentication in the frontend. Especially for the `react-query` library.
This library is a wrapper around the `react-query` library to handle authentication. It don't fetch the data from the server. It just handles the authentication state.

## Installation

```bash
pnpm add @breeze/breeze-auth --filter <app-name>
```

You can also append the following to the `package.json` file.

```json
{
  "dependencies": {
    "@breeze/breeze-auth": "*"
  }
}
```

## Usage

### Initialize the auth
You have to initialize the auth before you can use it. You can do this in the `App.tsx` file. But recommended to separate it from the user interface.

```ts
import {initAuth} from "@breeze/breeze-auth";

const {useAuthUser, useSignInUser, useSignOutUser} = initAuth({
  signInUserFn: () => user.signIn(),
  signOutUserFn: () => user.signOut(),
  getAuthUserFn: () => user.getAuthUser(),
  signUpUserFn: () => user.signUp(),
})
```

### Handling the authentication state with custom hooks

You have to use the `useAuthUser` hook to get the authentication state. We give you freedom to use the central state management library like `zustand` or `recoil` to handle the authentication state.
Here is how you can accomplish with `@tanstack/store`. You can use any state management library.
```ts
import {useAuthUser} from "~/lib/auth.ts";
import {authStore} from "~/store";

export function useAuth() {
  const auth = useAuthUser()

  if (auth.isSuccess) {
    authStore.setState(state => {
      return {
        ...state,
        user: auth.data,
      }
    })
  }

  return {
    isLoading: auth.isLoading,
    user: auth.data,
  }
}
```
