import {Note} from "../../components/mdx";
export const metadata = {
  title: 'Architecture',
  description: 'Setting up the environment for the project',
}

# Architecture

This project is using Domain Driven Micro-services Architecture. We separate the business logic into different microservices and use the event-driven architecture to communicate between the microservices. We use the [Kafka](https://kafka.apache.org/) as a message broker to communicate between the microservices.


<Note>
  You can find the Event Driven Design in [Event Driven Design Section](/edd).
</Note>

## Project Structure
We use mono-repo to manage the microservices and micro-frontends. The project structure is as follows:

``` {{title: 'Project Structure'}}
.
├── apps
│   ├── admin
│   ├── gateway
│   ├── notification
│   ├── suggestion
│   └── wallet
├── docs
│   └── api
├── infra
│   ├── databases
│   └── fluentd
├── packages
│   ├── react-auth
│   └── ui
├── research
│   ├── kafka-go
│   ├── topics-subscriber
│   └── web
├── scripts
├── toolings
│   ├── eslint-config
│   ├── github-actions
│   ├── prettier
│   ├── tailwind
│   └── tsconfig
└── www
    ├── admin-portal
    └── app-marketing

```
# Undrestanding the project structure

| Name | Description |
| ---- | ----------- |
|apps | Contains the microservices |
|docs | Contains the documentation realted stuffs |
|infra | Contains the infrastructure code for DevOps |
|packages | Contains the shared packages for all projects |
|research | Contains the research projects |
| scripts | Contains the bash script for end users who don't know operation stuffs |
| toolings | Contains the setup for tools like `eslint` and `prettier` |
|www | Contains the micro-frontends and modular frontend apps |

## `apps` directory
The `apps` directory contains the microservices apps. Each microservice is a separate project and has its own database.
Even each service has its own database, we don't separate the database server for each service. We use a single database server and create a separate database for each service. This is called [Database per Service](https://microservices.io/patterns/data/database-per-service.html) pattern.

| Name | Description |
| ---- | ----------- |
| gateway | Customized API Gateway to manage the authentication and authorization like AWS API Gateway |
| admin | Admin microservice allow to manage the system |
| notification | Notification service provide the real-time notification, email, and SMS |
| suggestion | Suggestions service provide the suggestions to the users by using the machine learning |
| wallet | Wallet microservice allow to manage the wallets including the transactions |



## `www` directory

Inside the `www` directory, we put the micro-frontends and modular frontend apps. Each micro-frontend is a separate project.

| Name | Description |
| ---- | ----------- |
| Web Admin Portal | Admin Portal for the Breeze app |
| Download App | Landing page for the Breeze app |


## Database

We primaryly use the `mysql` as a database server. We use the `redis` as a cache server and `elasticsearch` as a search server.

| Name | Description |
| ---- | ----------- |
| [MySQL](/mysql) | MySQL is used to store the data |
| [Redis](/redis) | Redis is used to store the cache data |
| [Elasticsearch](/elasticsearch) | Elasticsearch is used to store the logs and search data |


## Microservices Design Patterns
We use the following microservices design patterns in our microservices to make them scalable, reliable, and maintainable.
I assume that you are familiar with the design patterns and I will not explain them in detail.

<Note>
  If you are not familiar with them, you can find more information about them on the
  [Microservices.io](https://microservices.io/patterns/index.html) website.
</Note>

- [﻿Strangler Application](https://microservices.io/patterns/refactoring/strangler-application.html)
- [﻿API Composition](https://microservices.io/patterns/data/api-composition.html)
- [﻿Circuit Breaker](https://microservices.io/patterns/reliability/circuit-breaker.html)
- [﻿Saga](https://microservices.io/patterns/data/saga.html) (Kafka)
- [﻿Database per Service](https://microservices.io/patterns/data/database-per-service.html)
- [﻿Remote Procedure Invocation](https://microservices.io/patterns/communication-style/rpi.html) (Kafka)
- [﻿Messaging ](https://microservices.io/patterns/communication-style/messaging.html)
- [﻿Idempotent Consumer](https://microservices.io/patterns/communication-style/idempotent-consumer.html)
- [﻿API gateway](https://microservices.io/patterns/apigateway.html)
- [﻿Backend for front-end](https://microservices.io/patterns/apigateway.html)
- [﻿Access Token](https://microservices.io/patterns/security/access-token.html)
- [﻿Health check API](https://microservices.io/patterns/observability/health-check-api.html)
- [﻿Service instance per Container](https://microservices.io/patterns/deployment/service-per-container.html)
- [﻿Serverless deployment](https://microservices.io/patterns/deployment/serverless-deployment.html)
- [﻿Service registry](https://microservices.io/patterns/service-registry.html)
- [﻿Self registration](https://microservices.io/patterns/self-registration.html)
- [﻿Domain-specific protocol](https://microservices.io/patterns/communication-style/domain-specific.html)

## Software Design Patterns
We use the following software design patterns in our apps to make them scalable, reliable, and maintainable.

<Note>
  For the sake of your reference, I will not explain them in detail. You can find more information about them on the
  [Wikipedia](https://en.wikipedia.org/wiki/Software_design_pattern) website.
  I would like to suggest you to read the
  book [Design Patterns: Elements of Reusable Object-Oriented
  Software](https://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612) by Erich Gamma,
  Richard Helm, Ralph Johnson, and John Vlissides.
  For the light weight version, you can read the book [Dive into Design
  Patterns](https://refactoring.guru/design-patterns) by Alexander Shvets.
</Note>

- [﻿Model-View-Controller](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)
- [﻿Repository](https://en.wikipedia.org/wiki/Repository_pattern)
- [﻿Service Layer](https://en.wikipedia.org/wiki/Service_layer_pattern)
- [﻿Factory](https://en.wikipedia.org/wiki/Factory_method_pattern)
- [﻿Singleton](https://en.wikipedia.org/wiki/Singleton_pattern)
- [﻿Observer](https://en.wikipedia.org/wiki/Observer_pattern)
- [﻿Strategy](https://en.wikipedia.org/wiki/Strategy_pattern)
- [﻿Decorator](https://en.wikipedia.org/wiki/Decorator_pattern)
- [﻿Adapter](https://en.wikipedia.org/wiki/Adapter_pattern)
- [﻿Facade](https://en.wikipedia.org/wiki/Facade_pattern)
- [﻿Command](https://en.wikipedia.org/wiki/Command_pattern)
- [﻿Chain of Responsibility](https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)
